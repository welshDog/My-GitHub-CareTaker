version: '3.9'
services:
  redis:
    image: redis:7-alpine
    ports: ["6379:6379"]
  server:
    build: ./caretaker-js/server
    environment:
      - GH_TOKEN=${GH_TOKEN}
      - GH_USERNAME=${GH_USERNAME}
      - REDIS_URL=redis://redis:6379
    ports: ["8080:8080"]
    depends_on: [redis]
  web:
    build: ./caretaker-js/web
    environment:
      - VITE_API_BASE=http://localhost:8080
    ports: ["5173:5173"]
    depends_on: [server]
